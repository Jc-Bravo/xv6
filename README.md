# xv6

## have done
功能包括：命令：
- touch（创建一个或者多个文件）
- uptime（获取系统时间）
- cp（复制文件）
- mv（移动文件）
- editor（命令行格式的文本编辑器）
- cat（显示和文件操作）
- ren（重命名）；
- 功能：代码错误提示，历史记录，命令补全；新功能：splice（拼接文件）、cal（计算器）

## how to do
ren 命令：重新命名了 rename 命令为 ren 命令。rename.c 重命名为 ren.c，在新的 ren.c 文件中注释掉   //char * dir = argv[3]; //chdir(dir); 
并在第 9 行中添加 argc!=3，并且修改相关 makefile xv6 中的文件与文件名并不是一一对应的。多个文件名可以对应同一个文件。（当一个文件的所有文件名都与此文件失去关联时，此文件会被删除。）可以通过建立新文件名与文件的关联，取消旧文件名与文件的关联来实现对文件的重命。所以通过使用系统调用的 link 函数，将文件与新的文件名关联，再使用系统调用的
unlink 函数，取消文件与旧的文件名的关联。使用命令 ren old_filename new_filename 就可以将一个名为 old_filename 的文件转换成为 new_filename

错误命令提示:本功能主要通过修改 sh.c 文件中的 runcmd 函数（加入静态可接受命令集）使得用户可以在输入错误命令时有系统自动到寻找相似命令进行并且提醒用户。（注：相似命令：如果用户输入的命令与系统已有命令有至少两个字母相同则认定为相似）

editor命令：editor的功能是按行处理一个文件，实现了添加行、删除行、修改行、保存与退出等基本的功能以及提供给用户
show/hide的设置，并提供了Esc快捷键和Ctrl+S快捷键的支持。 
首先，editor使用write函数将文件内容读到内存，并按照\n分隔符对文件进行分行，分行后的文本内容用text变量存储，这是一个存储指针的数组，可以动态适应行数的变化。而插入、删除、修改功能则都是实现了相关函数com_ins、com_mod、com_del。实现本身并不复杂，就是对text数组进行处理. 
快捷键的实现思路是利用gets函数循环等待输入，当按下快捷键时从内核返回“特殊的缓冲区值”。通过判定该值决定是否执行事件处理函数。

查看历史命令 
如果我们想再次运行以前运行过的命令，我们希望通过快捷键执行，而不是重新打一遍该命令，就像 linux 的 terminal 或者.而 xv6 操作系统的 shell 并没有这样。所以我们对于该命令进行了改动。 
首先，当用户每次键入回车后，系统将会将该命令储存到一个数组中。当用户在非命令提示的过程中（即界面中没有白底灰字的命令提示）键入上下键，用户即可相应地跳转至其他命令。 
